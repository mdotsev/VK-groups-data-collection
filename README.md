# VK-groups-data-collection

Проект позволяет получить все посты сообщества, комментарии и ответы к ним за указанный период для дальнейшего анализа. При реализации была собрана информация об активности 23 сообществ за последние 5 лет. Пример собранной информации можно увидеть в таблице `example.xlsx`.

Основные функциии проекта базируются на методах [VK API](https://dev.vk.com/ru/reference) и написаны в файле `collect_data`, поэтому для их использования нужен токен авторизации (файл `config.py`):

- `get_posts(domain, offset)` — позволяет получить посты сообщества по домену и значению сдвига. [VK API](https://dev.vk.com/ru/reference) выдает только до 100 постов за один запрос, поэтому для сбора информации за 5 лет нужно увеличивать сдвиг на 100 для получения следующих 100 постов.
- `get_comments(owner_id, post_id, offset, comment_id, count)` — позволяет получить комментарии к посту по уникальному идентификатору сообщества и поста. 

Для сбора и компановки информации за фиксированный период используются функции:

- `collect_posts(company, to_date, from_date)` — возвращает посты за период `to_date` — `from_date` по домену `company`
- `collect_comments(posts, to_date, from_date)` — возвращает комментарии за период `to_date` — `from_date` по постам, полученным функцией `collect_posts`
- `collect_threads(all_comments, all_posts)` — возвращает комментарии комментарии к комментариям и постам, полученным функциями `collect_posts` и `collect_comments`
- `create_dataframe(posts, comments, threads)` — компанует все данные в одну таблицу (`example.xlsx` — пример такой таблицы)
